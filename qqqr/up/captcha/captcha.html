<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Captcha and TcaptchaSession &mdash; aioqzone 0.9.11.dev2 文档</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/autodoc_pydantic.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/penguin-blob.webp"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="Solving Jigsaw-Like Tcaptcha" href="jigsaw.html" />
    <link rel="prev" title="用户名-密码登录" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> aioqzone
            <img src="../../../_static/penguin-blob.webp" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../aioqzone/index.html">aioqzone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jssupport/index.html">jssupport</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">QQQR</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../event/index.html">aioqzone 事件-回调系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../qr/index.html">二维码登录</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">用户名-密码登录</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Captcha and TcaptchaSession</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#qqqr.up.captcha.Captcha"><code class="docutils literal notranslate"><span class="pre">Captcha</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#qqqr.up.captcha.TcaptchaSession"><code class="docutils literal notranslate"><span class="pre">TcaptchaSession</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="jigsaw.html">Solving Jigsaw-Like Tcaptcha</a></li>
<li class="toctree-l3"><a class="reference internal" href="../login.html">UpLogin and UpSession</a></li>
<li class="toctree-l3"><a class="reference internal" href="../type.html">UpLogin Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../base.html">QQQR Bases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../exception.html">QQQR Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../reference.html">References</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">相关链接</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../disclaimers.html">免责声明</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/aioqzone/aioqzone">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.org/project/aioqzone">PyPI</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/aioqzone/aioqzone/blob/beta/CONTRIBUTING.md">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">aioqzone</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">QQQR</a></li>
          <li class="breadcrumb-item"><a href="../index.html">用户名-密码登录</a></li>
      <li class="breadcrumb-item active">Captcha and TcaptchaSession</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/qqqr/up/captcha/captcha.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="captcha-and-tcaptchasession">
<h1>Captcha and TcaptchaSession<a class="headerlink" href="#captcha-and-tcaptchasession" title="此标题的永久链接"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qqqr.up.captcha.</span></span><span class="sig-name descname"><span class="pre">Captcha</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">appid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlogin_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha" title="永久链接至目标"></a></dt>
<dd><dl class="py property">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.base64_ua">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">base64_ua</span></span><a class="headerlink" href="#qqqr.up.captcha.Captcha.base64_ua" title="永久链接至目标"></a></dt>
<dd><p>The base64_ua function encodes the User-Agent header in base64.</p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>A string containing the base64 encoded user agent</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.get_captcha_problem">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_captcha_problem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha.get_captcha_problem" title="永久链接至目标"></a></dt>
<dd><p>The get_captcha_problem function is a coroutine that accepts a TcaptchaSession object as an argument.
It then uses the session to make an HTTP GET request to the captcha images (the problem). The images
will be stored in the given session.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>sess</strong> (<a class="reference internal" href="#qqqr.up.captcha.TcaptchaSession" title="qqqr.up.captcha.TcaptchaSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">TcaptchaSession</span></code></a>) – captcha session</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.get_tdc">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_tdc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls=&lt;class</span> <span class="pre">'qqqr.up.captcha.vm.TDC'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha.get_tdc" title="永久链接至目标"></a></dt>
<dd><p>The get_tdc function is a coroutine that sets an instance of the <code class="xref py py-class docutils literal notranslate"><span class="pre">TDC</span></code> class to <cite>sess</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sess</strong> (<a class="reference internal" href="#qqqr.up.captcha.TcaptchaSession" title="qqqr.up.captcha.TcaptchaSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">TcaptchaSession</span></code></a>) – captcha session</p></li>
<li><p><strong>cls</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="（在 Python v3.11）"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar" title="（在 Python v3.11）"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeVar</span></code></a>(<code class="docutils literal notranslate"><span class="pre">_TDC_TY</span></code>, bound= <code class="xref py py-class docutils literal notranslate"><span class="pre">TDC</span></code>)]) – Specify the type of <code class="xref py py-class docutils literal notranslate"><span class="pre">TDC</span></code> instance to be returned, default as <code class="xref py py-class docutils literal notranslate"><span class="pre">TDC</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.new">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">new</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha.new" title="永久链接至目标"></a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">prehandle</span></code>. Call this method to generate a new verify session.</p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>a tcaptcha session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.prehandle">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prehandle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha.prehandle" title="永久链接至目标"></a></dt>
<dd><p>alias of <a class="reference internal" href="#qqqr.up.captcha.Captcha.new" title="qqqr.up.captcha.Captcha.new"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.Captcha.solve_captcha">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">solve_captcha</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sess</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.Captcha.solve_captcha" title="永久链接至目标"></a></dt>
<dd><p>The solve_captcha function solves the captcha problem. If captcha images is not set,
it will call <a class="reference internal" href="#qqqr.up.captcha.Captcha.get_captcha_problem" title="qqqr.up.captcha.Captcha.get_captcha_problem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_captcha_problem()</span></code></a> firstly.</p>
<p>It then solve the captcha as that in <code class="xref py py-class docutils literal notranslate"><span class="pre">Jigsaw</span></code>. The answer is saved into <cite>sess</cite>.</p>
<p>This function will also call <code class="xref py py-meth docutils literal notranslate"><span class="pre">TDC.set_data()</span></code> to imitate human behavior when solving captcha.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>sess</strong> (<a class="reference internal" href="#qqqr.up.captcha.TcaptchaSession" title="qqqr.up.captcha.TcaptchaSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">TcaptchaSession</span></code></a>) – Store the information of the current session</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="qqqr.up.captcha.TcaptchaSession">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qqqr.up.captcha.</span></span><span class="sig-name descname"><span class="pre">TcaptchaSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prehandle</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.TcaptchaSession" title="永久链接至目标"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="qqqr.up.captcha.TcaptchaSession.solve_workload">
<span class="sig-name descname"><span class="pre">solve_workload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qqqr.up.captcha.TcaptchaSession.solve_workload" title="永久链接至目标"></a></dt>
<dd><p>The solve_workload function solves the workload from Tcaptcha:
It solves md5(<code class="xref py py-obj docutils literal notranslate"><span class="pre">PowCfg.prefix</span></code> + str(?)) == <code class="xref py py-obj docutils literal notranslate"><span class="pre">PowCfg.md5</span></code>.
The result and the calculating duration will be saved into this session.</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="（在 Python v3.11）"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) – Calculating timeout, default as 30 seconds.</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="../index.html" class="btn btn-neutral float-left" title="用户名-密码登录" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="jigsaw.html" class="btn btn-neutral float-right" title="Solving Jigsaw-Like Tcaptcha" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022, aioqzone.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>